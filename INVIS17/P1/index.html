<!DOCTYPE html>
<html>
<head>
	<style>
		/* data table styles */
		#grid { height: 400px; width: 100%; padding:30px; overflow-y: scroll ; }
		.row, .header { clear: left; font-size: 12px; line-height: 18px; height: 18px; }
		.row:nth-child(odd) { background: rgba(0,0,0,0.05); }
		.header { font-weight: bold; }
		.cell { float: left; overflow: hidden; white-space: nowrap; width: 8%; height: 18px; }
		.col-0 { width: 30%; }
		.col-1 { width: 60%; }
		.col-2 { width: 10%; }
	</style>
<title>
	Information Visualization Project 1 2017
</title>
	<!-- <script src="http://cdnjs.cloudflare.com/ajax/libs/d3/3.4.13/d3.min.js"></script> -->
	<script src="parcoordslib/d3.min.js"></script>
	<script src="d3.svg.multibrush.js"></script>
	<script src="d3.parcoords.js"></script>
	<script src="parcoordslib/sylvester.js"></script>
	<script type="text/javascript" src="parcoordslib/divgrid.js"></script>
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
	<link rel="stylesheet" type="text/css" href="d3.parcoords.css">
	<script src="radar-chart/src/radar-chart.js"></script>
	<link rel="stylesheet" type="text/css" href="radar-chart/src/radar-chart.css">



	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
	<link rel="stylesheet" type="text/css" href="styles.css">
</head>

<body style="background-color:white; color:black;">
	<div class="container" style="width:100%;margin:auto;">
		
		<div class="boxboxbox">
			<!-- Based from the beginning on the examples from paracoord library, and then heavily modified. -->
			<div class="row" style="width:100%;height: 300px;" >
				<div class="col-xs-12 ">
					<div id="example-progressive" class="parcoords" style="width:100%;height:300px"></div>
				</div>
			</div>
			<div class="row" style="height:40px;">
				<div class="col-xs-2"> 
					<button id="resetBrushes" class="btn btn-secondary dropdown-toggle" type="button" data-toggle="dropdown">Reset Brushes</button>
						<!-- <button id="resetBrushes">Reset Brushes</button> -->
				</div>
				<!-- <div class="col-xs-5"> 
				<button class="btn btn-secondary dropdown-toggle" type="button" data-toggle="dropdown" id="show_all_checkbox">Show all Brushed selections</button> -->
					<!--<button >Show all Brushed people, regardless of group assignment</input> -->
					<!-- </div> -->
				<div class="col-xs-3">
					<div class="dropdown">
						<button class="btn btn-secondary dropdown-toggle" type="button" data-toggle="dropdown">Assign Selection to group:
						<span class="caret"></span></button>
						<ul class="dropdown-menu" style="cursor:pointer;" id="assignManyToGroup">
							<li id="unassigngroup">Remove Group assigns from selection!</li>
							<li id="assigngroup0">Group 0</li>
							<li id="assigngroup1">Group 1</li>
							<li id="assigngroup2">Group 2</li>
							<li id="assigngroup3">Group 3</li>
							<li id="assigngroup4">Group 4</li>
							<li id="assigngroup5">Group 5</li>
							<li id="assigngroup6">Group 6</li>
							<li id="assigngroup7">Group 7</li>
							<li id="assigngroup8">Group 8</li>
						</ul>
					</div>
				</div>
				<!-- Large modal -->

				<div class="col-xs-2 col-xs-3">
					<button type="button" class="btn btn-success" data-toggle="modal" data-target=".bs-example-modal-lg">Inspect Groups</button>

					<div class="modal fade bs-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="myLargeModalLabel">
						<div class="modal-dialog modal-lg" role="document">
							<div class="modal-content" style="cursor:pointer;" id="viewGroups">
								<span class="modal_radar_chart" id="seeGroup0">Group 0</span>
								<span class="modal_radar_chart" id="seeGroup1">Group 1</span>
								<span class="modal_radar_chart" id="seeGroup2">Group 2</span>
								<span class="modal_radar_chart" id="seeGroup3">Group 3</span>
								<span class="modal_radar_chart" id="seeGroup4">Group 4</span>
								<span class="modal_radar_chart" id="seeGroup5">Group 5</span>
								<span class="modal_radar_chart" id="seeGroup6">Group 6</span>
								<span class="modal_radar_chart" id="seeGroup7">Group 7</span>
								<span class="modal_radar_chart" id="seeGroup8">Group 8</span>
							</div>
						</div>
					</div>
				</div>
			
				<!--	
				<div class="col-xs-3">
					<div class="dropdown">
						<button class="btn btn-secondary dropdown-toggle" type="button" data-toggle="dropdown">Assign Selection to group:
						<span class="caret"></span></button>
						<ul class="dropdown-menu" style="cursor:pointer;" id="viewGroups">
							<li id="seeGroup0">Group 0</li>
							<li id="seeGroup1">Group 1</li>
							<li id="seeGroup2">Group 2</li>
							<li id="seeGroup3">Group 3</li>
							<li id="seeGroup4">Group 4</li>
							<li id="seeGroup5">Group 5</li>
							<li id="seeGroup6">Group 6</li>
							<li id="seeGroup7">Group 7</li>
							<li id="seeGroup8">Group 8</li>
						</ul>
					</div>
				</div> -->
			</div>
		</div>
		
		<div class="row">
			<div id="gridDiv" class="col-xs-5" style="cursor:pointer;opacity:0.2;">	
				<div id="grid"></div>
			</div>
			<div class="">
				<div id="personInfo" style="visibility:hidden;">	
					<div class="col-xs-4" style="width:300px;">
						<div class="personalRadarHolder">		
							<div id="personRadarChart"> </div>
							<p style="margin:auto;padding-left: 30px; padding-top: 50px; "> Group mean values in brown </p>
						</div>
					</div>	
					
					<div class="col-xs-3">
						<div id="person_info" style="padding-top:20px;">
							<div class="dropdown">
								<button class="btn btn-secondary dropdown-toggle" type="button" data-toggle="dropdown">Assign Person to group:
								<span class="caret"></span></button>
								<ul class="dropdown-menu" style="cursor:pointer;" id="personChoosenGroup">
									<li id="personunassigngroup">Remove Group assigns from person!</li>
									<li id="personassigngroup0">Group 0</li>
									<li id="personassigngroup1">Group 1</li>
									<li id="personassigngroup2">Group 2</li>
									<li id="personassigngroup3">Group 3</li>
									<li id="personassigngroup4">Group 4</li>
									<li id="personassigngroup5">Group 5</li>
									<li id="personassigngroup6">Group 6</li>
									<li id="personassigngroup7">Group 7</li>
									<li id="personassigngroup8">Group 8</li>
								</ul>
							</div>
						</div>
						<div  class="boxboxbox">
							<table class="table" style="margin-top:40px;" id="personInfoTable" >
								<thead>
									<tr>
										<th> Person </th>
										<th> Information </th>
									</tr>
								</thead>
								<tr>
									<td> Person </td>
									<td> Information </td>
								</tr>
							</table>
						</div>
					</div>
				</div>
			</div>
		</div>


					
<script>
"use strict";

	d3.tsv('useDataData.tsv', function(data) {
	  
		data.forEach(function(d){
			d.IVIS = parseInt(d.IVIS);
			d.Stats=parseInt(d.Stats);
			d.Math=parseInt(d.Math);
			d.Art=parseInt(d.Art);
			d.Prog=parseInt(d.Prog);
			d.User=parseInt(d.User);
			d.Graphics=parseInt(d.Graphics);
			d.HCI=parseInt(d.HCI);
			d.UX=parseInt(d.UX);
		});
		var from_color_to_color  = d3.scale.linear()
			.domain([1,10])
			.range(["darkblue", "lightgreen"])
			.interpolate(d3.interpolateLab);
		var from_color_to_color_brushed  = d3.scale.linear()
			.domain([1,10])
			.range(["blue", "red"])
			.interpolate(d3.interpolateLab);


		var color = function(d) { 
				return from_color_to_color((d.IVIS+d.Stats+d.Math+d.Art+d.Prog+d.User+d.Graphics+d.HCI+d.UX)/9)
		};

		var color_brushed = function(d) { 
				return from_color_to_color_brushed((d.IVIS+d.Stats+d.Math+d.Art+d.Prog+d.User+d.Graphics+d.HCI+d.UX)/9)
		};

		//var color = function(d) { return colorgen(d.group); };
		var pc = d3.parcoords()("#example-progressive")
			.data(data)
			.dimensions({
				"IVIS":
					{
						orient:'left',
						type: 'number',
					},
				"Stats":
					{
						orient:'left',
						type: 'number',
					},
				"Math":
					{
						orient:'left',
						type: 'number',
					},
				"Art":
					{
						orient:'left',
						type: 'number',
					},
				"Prog":
					{
						orient:'left',
						type: 'number',
					},
				"Graphics":
					{
						orient:'left',
						type: 'number',
					},
				"HCI":
					{
						orient:'left',
						type: 'number',
					},
				"UX":
					{
						orient:'left',
						type: 'number',
					},
				"Interests":
					{
						orient:'right',
						type: 'string',
					},
				})
			
			.hideAxis(["Number", "User", "Alias"])
			.margin({
				top: 20,
				left: 20,
				right: 20,
				bottom: 20
			})
			.bundlingStrength(0.9)
			.smoothness(0.08)
			.color(color)
			.render()
			.createAxes()
			.composite("darken")
			.alpha(1)
			.alphaOnBrushed(0.2)
			.brushedColor(color_brushed);
		pc.brushMode("1D-axes-multi");
		
		d3.select("#resetBrushes").on("click", function(){
			pc.brushReset();
			pc.unhighlight();
		});

		pc.svg.selectAll("text").style("font", "10px sans-serif");
		
		var grid = d3.divgrid();
	
		
		var backup_data = data;

		var groups = [];
		for (var i = 0; i < 9; i++){
			groups.push([]);
		}
		var group_means = [];
		var group_maxims = []
		for (var i = 0; i < 9; i++){
			group_means.push([0,0,0,0]);
			group_maxims.push([0,0,0,0]);
		}
		
		var find_person_by_alias = function(a){
			var p = null;
			data.forEach(function(pp){
				if (pp.Alias == a){
					p = pp;
				}
			});
			return p;
		};

		var generateGroupChart = function(){
			$("#viewGroups span").each(function(i){
				var radar_data = [
					{
						className: "Group "+i,
						axes:[
						{axis: "Math", value:group_means[i][0] },	
						{axis: "Prog & Graph", value:group_means[i][1],yOffset:-14 },	
						{axis: "Art", value:group_means[i][2] },	
						{axis: "HCI UX", value:group_means[i][3],yOffset:12 },
						],
					},
				];

				RadarChart.defaultConfig.w = 200;
				RadarChart.defaultConfig.h = 200;	
				RadarChart.defaultConfig.levels=10;
				RadarChart.defaultConfig.minValue=0;
				RadarChart.defaultConfig.maxValue=10;
				var charttt=RadarChart.draw("#seeGroup"+i,radar_data);
				var chart = RadarChart.chart();
				var conf = chart.config();
			});
	
		};
		var update_group_mean = function(nr){
			if (nr < 0 || nr > 8){return;}
			group_means[nr][0] = 0;
			group_means[nr][1] = 0;
			group_means[nr][2] = 0;
			group_means[nr][3] = 0;
			var number_of_members = groups[nr].length;
			if(number_of_members > 0){
				for (var i = 0; i < number_of_members; i++){
					var p = find_person_by_alias(groups[nr][i]);
					group_means[nr][0]+=(p.Stats+p.Math)/2;
					group_means[nr][1]+=(p.Prog+p.Graphics)/2;	
					group_means[nr][2]+=(p.Art+p.IVIS)/2;	
					group_means[nr][3]+=(p.HCI + p.UX)/2;		
					if((p.Stats+p.Math)/2 > group_maxims[nr][0]){
						 group_maxims[nr][0]=(p.Stats+p.Math)/2 
					}
					if((p.Prog+p.Graphics)/2 > group_maxims[nr][1]){
						 group_maxims[nr][1]=(p.Prog+p.Graphics)/2; 
					}
					if((p.Art+p.IVIS)/2 > group_maxims[nr][2]){
						 group_maxims[nr][2]=(p.Art+p.IVIS)/2; 
					}
					if((p.HCI + p.UX)/2 > group_maxims[nr][3]){
						 group_maxims[nr][3]=(p.HCI + p.UX)/2 
					}
				}
				group_means[nr][0] =  group_maxims[nr][0] - ( group_maxims[nr][0] - group_means[nr][0] / number_of_members)*0.5;
				group_means[nr][1] =  group_maxims[nr][1] - ( group_maxims[nr][1] - group_means[nr][1] / number_of_members)*0.5;
				group_means[nr][2] =  group_maxims[nr][2] - ( group_maxims[nr][2] - group_means[nr][2] / number_of_members)*0.5;
				group_means[nr][3] =  group_maxims[nr][3] - ( group_maxims[nr][3] - group_means[nr][3] / number_of_members)*0.5;
			}
			generateGroupChart();
		};

		var remove_from_group = function(p){
			for (var i = 0; i < groups.length; i++){	
				var ii = groups[i].indexOf(p.Alias);
				if (ii >= 0){
					groups[i].splice(ii,1);
					update_group_mean(i);
					return true;
				}
			}
			return false;
		};

		var find_in_group = function(p){
			for (var i = 0; i < groups.length; i++){
				for (var j = 0; j < groups[i].length; j++){
					if (p.Alias.localeCompare(groups[i][j]) === 0){
						return i;
					}
				}
			}
			return -1;
		};

		var assign_person_to_group = function(person, groupnumber){
			var found = false;
			for (var iii = 0; iii < groups.length; iii++){
				var ii = groups[iii].indexOf(person.Alias);
				if (ii >= 0){
					groups[iii].splice(ii,1);
					update_group_mean(iii);
					
				}
			}
			
			groups[groupnumber].push(person.Alias);
			update_group_mean(groupnumber);

		};



			
		
		var filtered_data = [];
		data.forEach(function(d){
			var found = false;
			filtered_data.forEach(function(dd){
				if (d.Alias == dd.Alias){
					found = true;
					dd.Interests += ", "+ d.Interests
				}
			});
			if (!found){
				var g = find_in_group(d);
				if (g != -1){
					filtered_data.push({
						"Alias":d.Alias,
						"Interests":d.Interests,
						"Group":""+g,
					});
				}else{
					filtered_data.push({
						"Alias":d.Alias,
						"Interests":d.Interests,
						"Group":"",
					});
				}
			}
		});
		
		var update_group_numbers_in_rows = function(rows){	
			rows[0].forEach(function(p){
				var alias = $(p).find(".col-0").html();
					
				var g = find_in_group({Alias:alias});

				if (g != -1){
					$(p).find(".col-2").text(g);
					$(p).css("opacity","0.3");
				}else{
					$(p).find(".col-2").text("");
					$(p).css("opacity","1");

				}
				
			});
		}

		
		var table_sort_order = function(a,b){return a.Alias.localeCompare(b.Alias);}
		var update_table = function(filteder_data){	
			
			filtered_data.sort(table_sort_order);
			
			filtered_data.forEach(function(d){
				var g = find_in_group(d);
				if (g !== -1){
					d.Group = g;
				}else{
					d.Group = "";
				}
			});

			var r = d3.select("#grid")
				.datum(filtered_data)
				.call(grid)
				.selectAll(".row")
			
			return r;
		}
		var rows = update_table(filtered_data);
			
		

		var updateRadarChart = function(radar_data){
			RadarChart.defaultConfig.w = 290;
			RadarChart.defaultConfig.h = 290;	
			RadarChart.defaultConfig.levels=10;
			RadarChart.defaultConfig.minValue=0;
			RadarChart.defaultConfig.maxValue=10;
			RadarChart.draw("#personRadarChart",radar_data);
			var chart = RadarChart.chart();
			var conf = chart.config();
		};

		var displayInfoInRightCorner = function(person){
			//Using the radar chart plugin by Alvaro Graves
			var p = null;
			backup_data.forEach(function(d){
				if (d.Alias == person.Alias){
					p = d;
				}
			});
			if ( p == null ) {return;}
			var radar_data = [
				{
					className: p.Alias,
					axes:[
						{axis: "Mathematics", value:(p.Stats+p.Math)/2},	
						{axis: "Programming and Graphics", value:(p.Prog+p.Graphics)/2,yOffset:-14},	
						{axis: "Artistic skills", value:(p.Art+p.IVIS)/2},	
						{axis: "Computer Interaction", value:(p.HCI + p.UX)/2,yOffset:12},
					],
				},
			];
			
			
			updateRadarChart(radar_data);
			$("#personInfoTable th").remove();
			$("#personInfoTable tr").remove();
			$("#personInfoTable").find("tbody").append($("<th>").html("Person")).append($("<th>").html(p.Alias));

			$("#personInfoTable").find("tbody").append($("<tr>").append($("<td>").html("IVIS")).append($("<td>").html(p.IVIS)));
			$("#personInfoTable").find("tbody").append($("<tr>").append($("<td>").html("Statisics")).append($("<td>").html(p.Stats)));
			$("#personInfoTable").find("tbody").append($("<tr>").append($("<td>").html("Mathematics")).append($("<td>").html(p.Math)));
			$("#personInfoTable").find("tbody").append($("<tr>").append($("<td>").html("Artistic")).append($("<td>").html(p.Art)));
			$("#personInfoTable").find("tbody").append($("<tr>").append($("<td>").html("Programming")).append($("<td>").html(p.Prog)));
			$("#personInfoTable").find("tbody").append($("<tr>").append($("<td>").html("Graphics")).append($("<td>").html(p.Graphics)));
			$("#personInfoTable").find("tbody").append($("<tr>").append($("<td>").html("H C I")).append($("<td>").html(p.HCI)));
			$("#personInfoTable").find("tbody").append($("<tr>").append($("<td>").html("U X")).append($("<td>").html(p.UX)));
			
			var in_group = find_in_group(p);

			$("#personChoosenGroup li").each(function(i){
				$(this).unbind();
				if (in_group !== -1 && in_group === i-1){
					$(this).css("background-color","green");
				}else{
					$(this).css("background-color","white");
				}
				$(this).on({
					"click": function(sak){
						if (i > 0){
							assign_person_to_group(p,i-1);
							var radar_data = [
								{
									className: p.Alias,
									axes:[
										{axis: "Mathematics", value:(p.Stats+p.Math)/2},	
										{axis: "Programming and Graphics", value:(p.Prog+p.Graphics)/2,yOffset:-14},	
										{axis: "Artistic skills", value:(p.Art+p.IVIS)/2},	
										{axis: "Computer Interaction", value:(p.HCI + p.UX)/2,yOffset:12},
									],
								},
								{
									className: "Group "+(i-1) +" mean values",
									axes:[
										{axis: "Mathematics", value:group_means[i-1][0]},	
										{axis: "Programming and Graphics", value:group_means[i-1][1],yOffset:-14},	
										{axis: "Artistic skills", value:group_means[i-1][2]},	
										{axis: "Computer Interaction", value:group_means[i-1][3],yOffset:12},
									],
								},
							];

							updateRadarChart(radar_data);
						}else{
							remove_from_group(p);
						}
						update_group_numbers_in_rows(rows);	
						//displayInfoInRightCorner(p);
											//update_table();
					},
					"mouseover": function(sak){
						if (i > 0){
							var radar_data = [
								{
									className: p.Alias,
									axes:[
										{axis: "Mathematics", value:(p.Stats+p.Math)/2},	
										{axis: "Programming and Graphics", value:(p.Prog+p.Graphics)/2,yOffset:-14},	
										{axis: "Artistic skills", value:(p.Art+p.IVIS)/2},	
										{axis: "Computer Interaction", value:(p.HCI + p.UX)/2,yOffset:12},
									],
								},
								{
									className: "Group "+(i-1) +" mean values",
									axes:[
										{axis: "Mathematics", value:group_means[i-1][0]},	
										{axis: "Programming and Graphics", value:group_means[i-1][1],yOffset:-14},	
										{axis: "Artistic skills", value:group_means[i-1][2]},	
										{axis: "Computer Interaction", value:group_means[i-1][3],yOffset:12},
									],
								},
							];
							updateRadarChart(radar_data);
						}
					}

				});
			});
			$("#personInfo").css("visibility", "visible");


		};


		rows.on({
			"mouseover": function(d) {
				var highl = [];
					
				data.forEach(function(dd){
					if (dd.Alias == d.Alias){
						highl.push(dd);
					}	
				});
				pc.highlight(highl)
					.color(color);
			},
			"mouseout": pc.unhighlight,
			"click":function(p){

				displayInfoInRightCorner(p);
				/*
				var in_group = find_in_group(p);

				$("#personChoosenGroup li").each(function(i){
					if (in_group != -1 && in_group == i-1){
						$(this).css("background-color","green");
					}else{
						$(this).css("background-color","white");
					}
					$(this).on("click", function(sak){
						assign_person_to_group(p,i-1);
						$(this).css("background-color","green");
						displayInfoInRightCorner(p);
					});
				});
				*/
       			},
		});
		



		var show_all_regardless_of_group = true;
		$("#show_all_checkbox").on("click",function(i){
			show_all_regardless_of_group = !show_all_regardless_of_group;
			if(show_all_regardless_of_group){
				$(this).css("color","green");
				$(this).html("Shows all Brushed selection");
			}else{
				$(this).css("color","red");
				$(this).html("Hide already assigned to groups");
			}
		});
		($("#show_all_checkbox")).css("color","green");
		
		pc.on("brush", function(new_to_list) {
			if (new_to_list.length > 0){
				$("#gridDiv").css("opacity","1");
			}else{
				$("#gridDiv").css("opacity","0.3");
			}
			$("#personInfo").css("visibility", "hidden");
			var already_in_table = []; 
			
			new_to_list.forEach(function(d){
				var found = false;
				already_in_table.forEach(function(dd){
					if (d.Alias == dd.Alias){
						found = true;
					}
				});
				
				var assigned_to_group = find_in_group(d);

				if (!found && (assigned_to_group == -1 || show_all_regardless_of_group)){
					filtered_data.forEach(function(fd){
						if (d.Alias == fd.Alias){
							var g = find_in_group(fd);
							if (g != -1){
								fd.Group = g;
							}else{
								fd.Group = "";
							}
							already_in_table.push(fd);
							return;
						}
					});
				}
			});	
			
			rows = d3.select("#grid")
				.datum(already_in_table)
				.call(grid)
				.selectAll(".row");
			
			$(rows).unbind();
			rows.on({
					"mouseover": function(d) { 
						var highl = []
						data.forEach(function(dd){
							if (dd.Alias == d.Alias){
								highl.push(dd);
							}	
						});
						pc.highlight(highl);

						//pc.highlight([d]);
					
					},	
					"mouseout": pc.unhighlight
				});

			rows.on({
				"mouseover": function(d) {
					var highl = [];
						
					data.forEach(function(dd){
						if (dd.Alias == d.Alias){
							highl.push(dd);
						}	
					});
					pc.highlight(highl)
						.color(color);
				},
				"mouseout": pc.unhighlight,
				"click":function(p){

					displayInfoInRightCorner(p);
									},
			});

			$("#assignManyToGroup li").unbind();
			$("#assignManyToGroup li").each(function(i){
				$(this).unbind()
				if(i > 0){
					$(this).on("click",function(sak){
						already_in_table.forEach(function(p){	
							assign_person_to_group(p,i-1);
							update_group_numbers_in_rows(rows);	
						});
					})
				}else{
					$(this).on("click",function(sak){
						already_in_table.forEach(function(p){	
							remove_from_group(p);
							update_group_numbers_in_rows(rows);	
						});
					})

				}
			});
			update_group_numbers_in_rows(rows);

		});

		generateGroupChart();
			

		var set_sort_order = function(so){
			if (so == 0){
				table_sort_order = function(a,b){return a.Alias.localeCompare(b.Alias);}
			}else{
				table_sort_order = function(a,b){return a.Interests.localeCompare(b.Interests);}
			}
			update_table();	

		};
		$("#grid .header .col-0").on("click", function(d){;set_sort_order(0);});
		$("#grid .header .col-1").on("click", function(d){;set_sort_order(1);});
		

		$("#viewGroups span").each(function(i){
			$(this).mouseover(function(eve){

				var s = "";
				for (var j = 0; j < groups[i].length; j++){
					s = s + "<li>"+ groups[i][j] + "</li>";
				}
				$('<div>').append($("<div>").html("Group "+i+ " ("+groups[i].length+" members)"  )).append($("<ul>").html(s)  ).attr("class","member_blob").css({"font-size": "12px","background-color": "#eaeaea"}) .appendTo('body');
				var posx = eve.pageX+20;
				var posy = eve.pageY+30;	
				$('div.member_blob').css({'position': 'absolute', 'top': posy, 'left': posx, 'z-index':3000});	
			}).mouseout(function(eve){
				$('div.member_blob').remove();
			});
		});

	});
	

</script>
		</div>
	</body>
</html>


